!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).FunnelGraph=t()}}(function(){return function a(o,s,l){function c(e,t){if(!s[e]){if(!o[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(u)return u(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[e]={exports:{}};o[e][0].call(r.exports,function(t){return c(o[e][1][t]||t)},r,r.exports,a,o,s,l)}return s[e].exports}for(var u="function"==typeof require&&require,t=0;t<l.length;t++)c(l[t]);return c}({1:[function(t,e,n){"use strict";e.exports=t("./src/js/main").default},{"./src/js/main":3}],2:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.defaultColors=n.removeAttrs=n.setAttrs=n.createSVGElement=n.areEqual=n.getDefaultColors=n.generateLegendBackground=void 0;function a(e,n){"object"===r(n)&&Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}n.setAttrs=a;n.removeAttrs=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach(function(t){e.removeAttribute(t)})};n.createSVGElement=function(t,e,n){var i=document.createElementNS("http://www.w3.org/2000/svg",t);return"object"===r(n)&&a(i,n),void 0!==e&&e.appendChild(i),i};n.generateLegendBackground=function(t,e){var n=1<arguments.length&&void 0!==e?e:"horizontal";return"string"==typeof t?"background-color: ".concat(t):1===t.length?"background-color: ".concat(t[0]):"background-image: linear-gradient(".concat("horizontal"===n?"to right, ":"").concat(t.join(", "),")")};var o=["#FF4589","#FF5050","#05DF9D","#4FF2FD","#2D9CDB","#A0BBFF","#FFD76F","#F2C94C","#FF9A9A","#FFB178"];n.defaultColors=o;n.getDefaultColors=function(t){for(var e=[].concat(o),n=[],i=0;i<t;i++){var r=Math.abs(Math.round(Math.random()*(e.length-1)));n.push(e[r]),e.splice(r,1)}return n};n.areEqual=function(t,e){var n=Object.prototype.toString.call(t);if(n!==Object.prototype.toString.call(e))return!1;if("[object Array]"!==n)return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++){var r=Object.prototype.toString.call(t[i]);if(r!==Object.prototype.toString.call(e[i]))return!1;if("[object Array]"===r){if(t[i].length!==e[i].length)return!1;for(var a=0;a<t[i].length;a++)if(t[i][a]!==e[i][a])return!1}else if(t[i]!==e[i])return!1}return!0}},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,y=t("./number"),h=t("./path"),c=t("./graph"),u=(i=t("./random"))&&i.__esModule?i:{default:i};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.containerSelector=t.container,this.gradientDirection=t.gradientDirection&&"vertical"===t.gradientDirection?"vertical":"horizontal",this.direction=t.direction&&"vertical"===t.direction?"vertical":"horizontal",this.labels=i.getLabels(t),this.subLabels=i.getSubLabels(t),this.values=i.getValues(t),this.values_label=t.data&&t.data.values_label||i.getValues(t),this.percentages=this.createPercentages(),this.colors=t.data.colors||(0,c.getDefaultColors)(this.is2d()?this.getSubDataSize():2),this.displayPercent=t.displayPercent||!1,this.data=t.data,this.height=t.height,this.width=t.width,this.subLabelValue=t.subLabelValue||"percent",this.status_leads=t.data.status_leads||[],this.projetado=t.data.projetado||[]}var t,e,n;return t=i,n=[{key:"getSubLabels",value:function(t){if(!t.data)throw new Error("Data is missing");var e=t.data;return void 0===e.subLabels?[]:e.subLabels}},{key:"getLabels",value:function(t){if(!t.data)throw new Error("Data is missing");var e=t.data;return void 0===e.labels?[]:e.labels}},{key:"getValues",value:function(t){if(!t.data)return[];var e=t.data;return"object"===r(e)?e.values:[]}}],(e=[{key:"getMainAxisPoints",value:function(){for(var t=this.getDataSize(),e=[],n=this.isVertical()?this.getHeight():this.getWidth(),i=0;i<=t;i++)e.push((0,y.roundPoint)(n*i/t));return e}},{key:"getCrossAxisPoints",value:function(){var t=[],e=this.getFullDimension(),n=e/2;if(this.is2d()){var i=this.getValues2d(),r=Math.max.apply(Math,f(i));i.push(f(i).pop()),t.push(i.map(function(t){return(0,y.roundPoint)((r-t)/r*n)}));for(var a=this.getPercentages2d(),o=t[0],s=1;s<this.getSubDataSize();s++){for(var l=t[s-1],c=[],u=0;u<this.getDataSize();u++)c.push((0,y.roundPoint)(l[u]+(e-2*o[u])*(a[u][s-1]/100)));c.push([].concat(c).pop()),t.push(c)}t.push(o.map(function(t){return e-t}))}else{var h=Math.max.apply(Math,f(this.values)),d=f(this.values).concat(f(this.values).pop());t.push(d.map(function(t){return(0,y.roundPoint)((h-t)/h*n)})),t.push(t[0].map(function(t){return e-t}))}return t}},{key:"getGraphType",value:function(){return this.values&&this.values[0]instanceof Array?"2d":"normal"}},{key:"is2d",value:function(){return"2d"===this.getGraphType()}},{key:"isVertical",value:function(){return"vertical"===this.direction}},{key:"getDataSize",value:function(){return this.values.length}},{key:"getSubDataSize",value:function(){return this.values[0].length}},{key:"getFullDimension",value:function(){return this.isVertical()?this.getWidth():this.getHeight()}},{key:"addLabels",value:function(){var p=this,b=document.createElement("div");b.setAttribute("class","svg-funnel-js__labels"),this.percentages.forEach(function(t,e){var n=document.createElement("a");n.setAttribute("class","svg-funnel-js__label label-".concat(e+1)),n.onclick=function(){var t=window.location.search.replace("?filter=","");(t=t.replace(/imb_id/g,"imobiliaria").replace(/tpng_id/g,"tipo_interesse").replace("tmstmpopt","filterdate").replace("calendar_date_init","updatedAt_ini").replace("calendar_date_end","updatedAt_fim").replace(/(\d{2})-(\d{2})-(\d{4})/,"$1/$2/$3"))?t+="&forceallleads=true&from=dashboard&cliente_interessado_passou_pelo_status=".concat(p.status_leads[e],"&cliente_interessado_passou_pelo_status.label=").concat(p.labels[e]):t="&forceallleads=true&from=dashboard&cliente_interessado_passou_pelo_status=".concat(p.status_leads[e],"&cliente_interessado_passou_pelo_status.label=").concat(p.labels[e]),window.location.href="".concat(window.location.origin,"/app/clientesinteressados?filter=").concat(t)};var i=document.createElement("div");i.setAttribute("class","label__status_pass"),i.textContent="Passaram por";var r=document.createElement("div");r.setAttribute("class","label__title label-color-".concat(e+1)),r.textContent=p.labels[e]||"";var a=document.createElement("div");a.setAttribute("class","label__value");var o=document.createElement("div");o.setAttribute("class","label__projected__value projected__value-".concat(e+1));var s=document.createElement("span");s.setAttribute("class","label-fixo");var l=document.createElement("span"),c=p.is2d()?p.values_label[e][0]:"";c&&(s.textContent="Meta:",l.textContent=(0,y.formatNumber)(c),o.appendChild(s),o.appendChild(l));var u=document.createElement("div");u.setAttribute("class","label__realized__value realized__value-".concat(e+1));var h=document.createElement("span");h.setAttribute("class","label-fixo");var d=document.createElement("span"),f=p.is2d()?p.values_label[e][1]:p.values_label[e];h.textContent="AlcanÃ§ado:",d.textContent=(0,y.formatNumber)(f),u.appendChild(h),u.appendChild(d);var v=f/p.values_label[0][1]*100;"Infinity"!==v&&v!==1/0||(v=100),Number.isNaN(v)&&(v=0);var g=document.createElement("div");g.setAttribute("class","label__percentage percentage__label-".concat(e+1)),g.textContent="".concat(v.toLocaleString("pt-BR",{minimumFractionDigits:0,maximumFractionDigits:2}),"%"),a.appendChild(o),a.appendChild(u),n.appendChild(i),n.appendChild(r),n.appendChild(a),p.displayPercent&&n.appendChild(g),b.appendChild(n)}),this.container.appendChild(b)}},{key:"addSubLabels",value:function(){var n=this;if(this.subLabels){var t=document.createElement("div");t.setAttribute("class","svg-funnel-js__subLabels");var i="";this.subLabels.forEach(function(t,e){i+='<div class="svg-funnel-js__subLabel svg-funnel-js__subLabel-'.concat(e+1,'">\n    <div class="svg-funnel-js__subLabel--color"\n        style="').concat((0,c.generateLegendBackground)(n.colors[e],n.gradientDirection),'"></div>\n    <div class="svg-funnel-js__subLabel--title">').concat(t,"</div>\n</div>")}),t.innerHTML=i,this.container.appendChild(t)}}},{key:"createContainer",value:function(){if(!this.containerSelector)throw new Error("Container is missing");if("string"==typeof this.containerSelector){if(this.container=document.querySelector(this.containerSelector),!this.container)throw new Error("Container cannot be found (selector: ".concat(this.containerSelector,")."))}else{if(!(this.container instanceof HTMLElement))throw new Error("Container must either be a selector string or an HTMLElement.");this.container=this.containerSelector}this.container.classList.add("svg-funnel-js"),this.container.innerHTML="",this.graphContainer=document.createElement("div"),this.graphContainer.classList.add("svg-funnel-js__container"),this.container.appendChild(this.graphContainer),"vertical"===this.direction&&this.container.classList.add("svg-funnel-js--vertical")}},{key:"setValues",value:function(t){return this.values=t,this}},{key:"setDirection",value:function(t){return this.direction=t,this}},{key:"setHeight",value:function(t){return this.height=t,this}},{key:"setWidth",value:function(t){return this.width=t,this}},{key:"getValues2d",value:function(){var e=[];return this.values.forEach(function(t){e.push(t.reduce(function(t,e){return t+e},0))}),e}},{key:"getPercentages2d",value:function(){var n=[];return this.values.forEach(function(t){var e=t.reduce(function(t,e){return t+e},0);n.push(t.map(function(t){return 0===e?0:(0,y.roundPoint)(100*t/e)}))}),n}},{key:"createPercentages",value:function(){var t=[];t=this.is2d()?this.getValues2d():f(this.values);var e=Math.max.apply(Math,f(t));return t.map(function(t){return 0===t?0:(0,y.roundPoint)(100*t/e)})}},{key:"applyGradient",value:function(t,e,n,i){var r=null===t.querySelector("defs")?(0,c.createSVGElement)("defs",t):t.querySelector("defs"),a=(0,u.default)("funnelGradient-".concat(i,"-")),o=(0,c.createSVGElement)("linearGradient",r,{id:a});"vertical"===this.gradientDirection&&(0,c.setAttrs)(o,{x1:"0",x2:"0",y1:"0",y2:"1"});for(var s=n.length,l=0;l<s;l++)(0,c.createSVGElement)("stop",o,{"stop-color":n[l],offset:"".concat(Math.round(100*l/(s-1)),"%")});(0,c.setAttrs)(e,{fill:'url("#'.concat(a,'")'),stroke:'url("#'.concat(a,'")')})}},{key:"makeSVG",value:function(){for(var t=(0,c.createSVGElement)("svg",this.graphContainer,{width:this.getWidth(),height:this.getHeight()}),e=this.getCrossAxisPoints().length-1,n=0;n<e;n++){var i=(0,c.createSVGElement)("path",t),r=this.is2d()?this.colors[n]:this.colors,a="string"==typeof r||1===r.length?"solid":"gradient";"solid"==a?(0,c.setAttrs)(i,{fill:r,stroke:r}):"gradient"==a&&this.applyGradient(t,i,r,n+1),t.appendChild(i)}this.graphContainer.appendChild(t)}},{key:"getSVG",value:function(){var t=this.container.querySelector("svg");if(!t)throw new Error("No SVG found inside of the container");return t}},{key:"getWidth",value:function(){return this.width||this.graphContainer.clientWidth}},{key:"getHeight",value:function(){return this.height||this.graphContainer.clientHeight}},{key:"getPathDefinitions",value:function(){for(var t=this.getCrossAxisPoints().length-1,e=[],n=0;n<t;n++)if(this.isVertical()){var i=this.getCrossAxisPoints()[n],r=this.getCrossAxisPoints()[n+1],a=this.getMainAxisPoints(),o=(0,h.createVerticalPath)(n,i,r,a);e.push(o)}else{var s=this.getMainAxisPoints(),l=this.getCrossAxisPoints()[n],c=this.getCrossAxisPoints()[n+1],u=(0,h.createPath)(n,s,l,c);e.push(u)}return e}},{key:"getPathMedian",value:function(t){if(this.isVertical()){var e=this.getCrossAxisPoints()[t],i=this.getCrossAxisPoints()[t+1],n=this.getMainAxisPoints(),r=[],a=[];return e.forEach(function(t,e){var n=(t+i[e])/2;r.push(n-1),a.push(1+n)}),(0,h.createVerticalPath)(t,r,a,n)}var o=this.getMainAxisPoints(),s=this.getCrossAxisPoints()[t],l=this.getCrossAxisPoints()[t+1],c=[],u=[];return s.forEach(function(t,e){var n=(t+l[e])/2;c.push(n-1),u.push(1+n)}),(0,h.createPath)(t,o,c,u)}},{key:"drawPaths",value:function(){var n=this.getSVG().querySelectorAll("path");this.getPathDefinitions().forEach(function(t,e){n[e].setAttribute("d",t)})}},{key:"draw",value:function(){this.createContainer(),this.makeSVG(),this.addLabels(),this.is2d()&&this.addSubLabels(),this.drawPaths()}},{key:"makeVertical",value:function(){if("vertical"===this.direction)return!0;this.direction="vertical",this.container.classList.add("svg-funnel-js--vertical");var t=this.getSVG(),e=this.getHeight(),n=this.getWidth();return(0,c.setAttrs)(t,{height:e,width:n}),this.drawPaths(),!0}},{key:"makeHorizontal",value:function(){if("horizontal"===this.direction)return!0;this.direction="horizontal",this.container.classList.remove("svg-funnel-js--vertical");var t=this.getSVG(),e=this.getHeight(),n=this.getWidth();return(0,c.setAttrs)(t,{height:e,width:n}),this.drawPaths(),!0}},{key:"toggleDirection",value:function(){"horizontal"===this.direction?this.makeVertical():this.makeHorizontal()}},{key:"gradientMakeVertical",value:function(){if("vertical"===this.gradientDirection)return!0;this.gradientDirection="vertical";for(var t=this.graphContainer.querySelectorAll("linearGradient"),e=0;e<t.length;e++)(0,c.setAttrs)(t[e],{x1:"0",x2:"0",y1:"0",y2:"1"});return!0}},{key:"gradientMakeHorizontal",value:function(){if("horizontal"===this.gradientDirection)return!0;this.gradientDirection="horizontal";for(var t=this.graphContainer.querySelectorAll("linearGradient"),e=0;e<t.length;e++)(0,c.removeAttrs)(t[e],"x1","x2","y1","y2");return!0}},{key:"gradientToggleDirection",value:function(){"horizontal"===this.gradientDirection?this.gradientMakeVertical():this.gradientMakeHorizontal()}},{key:"updateWidth",value:function(t){this.width=t;var e=this.getSVG(),n=this.getWidth();return(0,c.setAttrs)(e,{width:n}),this.drawPaths(),!0}},{key:"updateHeight",value:function(t){this.height=t;var e=this.getSVG(),n=this.getHeight();return(0,c.setAttrs)(e,{height:n}),this.drawPaths(),!0}},{key:"updateData",value:function(t){var e=this.container.querySelector(".svg-funnel-js__labels"),n=this.container.querySelector(".svg-funnel-js__subLabels");e&&e.remove(),n&&n.remove(),this.labels=[],this.colors=(0,c.getDefaultColors)(this.is2d()?this.getSubDataSize():2),this.values=[],this.percentages=[],void 0!==t.labels&&(this.labels=i.getLabels({data:t})),void 0!==t.colors&&(this.colors=t.colors||(0,c.getDefaultColors)(this.is2d()?this.getSubDataSize():2)),void 0!==t.values&&(Object.prototype.toString.call(t.values[0])!==Object.prototype.toString.call(this.values[0])?(this.container.querySelector("svg").remove(),this.values=i.getValues({data:t}),this.makeSVG()):this.values=i.getValues({data:t}),this.drawPaths()),this.percentages=this.createPercentages(),this.addLabels(),void 0!==t.subLabels&&(this.subLabels=i.getSubLabels({data:t}),this.addSubLabels())}},{key:"update",value:function(t){var r=this;void 0!==t.displayPercent&&this.displayPercent!==t.displayPercent&&(!0===this.displayPercent?this.container.querySelectorAll(".label__percentage").forEach(function(t){t.remove()}):this.container.querySelectorAll(".svg-funnel-js__label").forEach(function(t,e){var n=r.percentages[e],i=document.createElement("div");i.setAttribute("class","label__percentage"),100!==n&&(i.textContent="".concat(n.toString(),"%"),t.appendChild(i))})),void 0!==t.height&&this.updateHeight(t.height),void 0!==t.width&&this.updateWidth(t.width),void 0!==t.gradientDirection&&("vertical"===t.gradientDirection?this.gradientMakeVertical():"horizontal"===t.gradientDirection&&this.gradientMakeHorizontal()),void 0!==t.direction&&("vertical"===t.direction?this.makeVertical():"horizontal"===t.direction&&this.makeHorizontal()),void 0!==t.data&&this.updateData(t.data)}}])&&a(t.prototype,e),n&&a(t,n),i}();n.default=o},{"./graph":2,"./number":4,"./path":5,"./random":6}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.formatNumber=n.roundPoint=void 0;n.roundPoint=function(t){return Math.round(10*t)/10};n.formatNumber=function(t){return Number(t).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createVerticalPath=n.createPath=n.createVerticalCurves=n.createCurves=void 0;var r=t("./number");function s(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(t,e,n,i){return" C".concat((0,r.roundPoint)((n+t)/2),",").concat(e," ")+"".concat((0,r.roundPoint)((n+t)/2),",").concat(i," ").concat(n,",").concat(i)}n.createCurves=l;function c(t,e,n,i){return" C".concat(t,",").concat((0,r.roundPoint)((i+e)/2)," ")+"".concat(n,",").concat((0,r.roundPoint)((i+e)/2)," ").concat(n,",").concat(i)}n.createVerticalCurves=c;n.createPath=function(t,e,n,i){for(var r="M".concat(e[0],",").concat(n[0]),a=0;a<e.length-1;a++)r+=l(e[a],n[a],e[a+1],n[a+1]);r+=" L".concat(s(e).pop(),",").concat(s(i).pop());for(var o=e.length-1;0<o;o--)r+=l(e[o],i[o],e[o-1],i[o-1]);return r+=" Z"};n.createVerticalPath=function(t,e,n,i){for(var r="M".concat(e[0],",").concat(i[0]),a=0;a<e.length-1;a++)r+=c(e[a],i[a],e[a+1],i[a+1]);r+=" L".concat(s(n).pop(),",").concat(s(i).pop());for(var o=e.length-1;0<o;o--)r+=c(n[o],i[o],n[o-1],i[o-1]);return r+=" Z"}},{"./number":4}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;function i(t){return Math.random().toString(36).replace("0.",t||"")}n.default=i},{}]},{},[1])(1)});